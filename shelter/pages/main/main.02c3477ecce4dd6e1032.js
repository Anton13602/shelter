(()=>{"use strict";const e=[],t=document.querySelector(".button__arrow-next"),o=document.querySelector(".button__arrow-prev"),n=document.querySelector(".pets__slider"),c=document.querySelectorAll(".slider-left .colum__img img"),r=document.querySelectorAll(".slider-left .colum__title"),s=document.querySelectorAll(".slider-rigth .colum__title"),i=document.querySelectorAll(".slider-rigth .colum__img img"),l=()=>{n.classList.add("transition-left"),o.removeEventListener("click",l),t.removeEventListener("click",a)},a=()=>{n.classList.add("transition-right"),o.removeEventListener("click",l),t.removeEventListener("click",a)};function d(){let t=[];for(let o=0;o<r.length;o++)for(let n=0;n<e.length;n++)if(r[o].innerHTML===e[n].name){t.push(n);break}return t}function u(t){let o,n=[];switch(!0){case window.screen.width>=1279.98:o=d();break;case window.screen.width<767.98:o=d().slice(0,1);break;default:o=d().slice(0,2)}for(;n.length<t;){let t=Math.floor(Math.random()*e.length),o=!1;n.includes(t)&&(o=!0),o||n.push(t)}let c=[...n,...o];return[...new Set(c)].length===n.length+o.length?n:u(t)}o.addEventListener("click",l),t.addEventListener("click",a),n.addEventListener("animationend",(d=>{if("move-left"===d.animationName){n.classList.remove("transition-left");const e=document.querySelector(".slider-left");document.querySelector(".slider-head").innerHTML=e.innerHTML}else{n.classList.remove("transition-right");const e=document.querySelector(".slider-rigth");document.querySelector(".slider-head").innerHTML=e.innerHTML}!function(){let t=function(){let e;switch(!0){case window.screen.width>=1279.98:e=3;break;case window.screen.width<767.98:e=1;break;default:e=2}return u(e)}();for(let o=0;o<t.length;o++)c[o].src=e[t[o]].img,r[o].innerHTML=e[t[o]].name,s[o].innerHTML=e[t[o]].name,i[o].src=e[t[o]].img}(),g(),o.addEventListener("click",l),t.addEventListener("click",a)}));const m=document.querySelectorAll(".close-popup");function p(e){const t=e.split("/").map((e=>e.toLowerCase()));return t[t.length-1]}function g(){document.querySelectorAll(".slider-head .popup-link").forEach((t=>{t.addEventListener("click",(()=>{const o=t.children[1].textContent,n=t.firstElementChild.children[0].src;var c;c=document.querySelector(".popup"),function(){const e=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px";document.querySelector("body").style.paddingRight=e,document.body.classList.add("_lock")}(),c.classList.add("open"),document.querySelector(".popup__content").classList.add("open"),c.addEventListener("click",(e=>{e.target.closest(".popup__content")||_(e.target.closest(".popup"))})),function(t,o){const n=document.querySelector(".body-popup__title"),c=document.querySelector(".body-popup__img img"),r=document.querySelector(".body-popup__sybtitle"),s=document.querySelector(".body-popup__text"),i=document.querySelectorAll(".body-popup__list p");let l=0;for(let n=0;n<e.length;n++)t===e[n].name&&p(o)===p(e[n].img)&&(l=n);n.innerHTML=e[l].name,c.src=e[l].img,r.innerHTML=`${e[l].type} - ${e[l].breed}`,s.innerHTML=e[l].description,i[0].innerHTML=e[l].age,i[1].innerHTML=e[l].inoculations,i[2].innerHTML=e[l].diseases,i[3].innerHTML=e[l].parasites}(o,n)}))}))}function _(e){document.querySelector("body").style.paddingRight="0px",document.body.classList.remove("_lock"),e.classList.remove("open"),document.querySelector(".popup__content").classList.remove("open"),document.body.querySelector("._lock")}g(),m.forEach((e=>{e.addEventListener("click",(t=>{_(e.closest(".popup"))}))}));const y=document.querySelector(".menu__icon"),L=document.querySelector(".menu__body"),h=document.querySelector(".backgroung"),v=document.querySelector(".header__logo");y.addEventListener("click",(e=>{e.stopPropagation(),L.classList.toggle("_active"),y.classList.toggle("_active"),document.querySelector("body").classList.toggle("_lock"),v.classList.toggle("_active"),h.classList.toggle("open"),document.addEventListener("click",(e=>{e.target.closest(".menu__body")||h.classList.contains("open")&&(L.classList.remove("_active"),y.classList.remove("_active"),h.classList.remove("open"),v.classList.remove("_active"),document.querySelector("body").classList.remove("_lock"))}))}));const f=document.querySelectorAll(".menu__link[data-goto]");if(f.length>0){function q(e){const t=e.target;if(t.dataset.goto&&document.querySelector(t.dataset.goto)){const o=document.querySelector(t.dataset.goto).getBoundingClientRect().top+window.pageYOffset;y.classList.contains("_active")&&(v.classList.remove("_active"),y.classList.remove("_active"),L.classList.remove("_active"),h.classList.remove("open"),document.querySelector("body").classList.remove("_lock")),window.scrollTo({top:o,behavior:"smooth"}),e.preventDefault()}}f.forEach((e=>{e.addEventListener("click",q)}))}const S=document.querySelectorAll(".anchor__link[data-goto]");if(S.length>0){function w(e){const t=e.target;if(t.dataset.goto&&document.querySelector(t.dataset.goto)){const o=document.querySelector(t.dataset.goto).getBoundingClientRect().top+window.pageYOffset;window.scrollTo({top:o,behavior:"smooth"}),e.preventDefault()}}S.forEach((e=>{e.addEventListener("click",w)}))}window.onload=async function(){try{const t=await fetch("https://anton13602.github.io/JSON_shelter/pest_main.json");(await t.json()).forEach((t=>{e.push(t)}))}catch{const t=await fetch("../../assets/json/pets.json");(await t.json()).forEach((t=>{e.push(t)}))}}})();